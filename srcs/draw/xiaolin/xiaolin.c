/* ************************************************************************** */
/*  💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩    */
/*  💩                    ┌┐┌┌─┐┬─┐┌┬┐  ┬┌─┐  ┌─┐┬ ┬┬┌┬┐                  💩   */
/*  💩                    ││││ │├┬┘│││  │└─┐  └─┐├─┤│ │                   💩   */
/*  💩                    ┘└┘└─┘┴└─┴ ┴  ┴└─┘  └─┘┴ ┴┴ ┴                   💩   */
/*  💩                                                                    💩   */
/*  💩                          WOOOW NORM                                💩   */
/*  💩                                                                    💩   */
/*  💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩💩   */
/*                     		               			                          */
/*                                                                            */
/*      NORMINETTE LOVERS                                                     */
/*                                                                            */
/*                        ───────────────────────────────────                 */
/*                        ───────────▄▄█▀██▀█▄▄▄▄────────────                 */
/*                        ─────────▄█▀▀████▄▄█▀▀▀▀█▄▄────────                 */
/*                        ───────▄█░░░░░░░░░░░░░░░░░░█▄──────                 */
/*                        ─────▄██░░░░░░░░░░░░░░░░░░░░▀█▄────                 */
/*                        ────▄██░░░░░░░░░░░░░░░░░░░░░░░██───                 */
/*                        ────█▀░░░░░░░░▄░░░░░░░░░░▄░░░░░▀█▄─                 */
/*                        ───█▀░░░░▄▀▀▀▀░█░░░░░▄▀▀▀░▀▄░░░░░█▄                 */
/*                        ──██░░░░█░▄▀▀▄░█░░░░█░▄▀▀▄░░█░░░░██                 */
/*                        ─██░░░░░█░░▀▀░▄▀░░░░▀▄░▀▀░░▄▀░░░░░█                 */
/*                        ██▀░░░░░▀▀▀▀▀▀░░░░░░░░▀▀▀▀▀░░░░░░░█                 */
/*                        ██░░░░░░░░░░░░░▐░░░░░░░░░░░░░░░░░░█                 */
/*                        █▀░░░░░░░░░░░░░▌░░░░▌░░░░░░░░░░░░░█                 */
/*                        █░░░░░░░░░░░░░▐░▄░▄░▐░░░░░░░░░░░░░█                 */
/*                        █░░░░░░░░▐░░░░░░░░░░░░░░░░░░░░░░░░█                 */
/*                        █░░░░░░░░▌░░░░░░░░░░░░░░░░░░░░░░░██                 */
/*                        █░░░░░░░▐░░▄▀▀▀▀▀▀▀▀▄░░░░░░░░░░░░██                 */
/*                        ─█░░░░░░░▄▀▄████████▄█▄░▌░░░░░░░██─                 */
/*                        ──█░░░░░░█▄█▄▄▄▄▄▄▄▄██▀░▐░░░░░▄██──                 */
/*                        ──▀▄░░░░░░▀█▄▄▄▄▄▄▄▄▀░░░░░░░▄█▀────                 */
/*                        ────█▄░░▀▄░░░░░░░░░░░░░░░░▄█▀──────                 */
/*                        ─────█▄▄░░▀░░░░░░░░░░░░░▄█▀────────                 */
/*                        ───────▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀▀──────────                 */
/*                        ───────────────────────────────────                 */
/*                  ┌─┐┬ ┬┌─┐┬┌─  ┌┐┌┌─┐┬─┐┌┬┐  ┌─┐┬  ┬ ┬┌┐                   */
/*                  ├┤ │ ││  ├┴┐  ││││ │├┬┘│││  │  │  │ │├┴┐                  */
/*                  └  └─┘└─┘┴ ┴  ┘└┘└─┘┴└─┴ ┴  └─┘┴─┘└─┘└─┘                  */
/*                                                                            */
/*   By: NORM IS SHIT                         LIKE NORMINETTE                 */
/*                                                                            */
/*   Created: fjkghdkfg fdkjghdHdb by norm is Shit                            */
/*   Updated: BBBBBBBBBB 99999999 by FUCK THE NORM                            */
/*                                                                            */
/*                   ┌─┐┬ ┬┌─┐┬┌─  ┌┐┌┌─┐┬─┐┌┬┐  ┌─┐┬  ┬ ┬┌┐                  */
/*                   ├┤ │ ││  ├┴┐  ││││ │├┬┘│││  │  │  │ │├┴┐                 */
/*                   └  └─┘└─┘┴ ┴  ┘└┘└─┘┴└─┴ ┴  └─┘┴─┘└─┘└─┘                 */
/*                                                                            */
/*      Ставб лайк, если ты тоже любишь норму ❤️                              */
/*                                                                            */
/*                                                                            */
/*        💩💩💩💩💩💩💩       💩         💩                                     */
/*                                                                            */
/*                                                                            */
/*                                                                            */
/* ************************************************************************** */

#include "fdf.h"
#include <math.h>
#include <stdlib.h>
#include "xiaolin.h"

static void	_dla_plot(t_mlx *mlx, t_xy dot, t_rgb_color *col, float br)
{
	t_rgb_color	oc;

	_dla_changebrightness(col, &oc, br);
	pixel_put(mlx, dot.x, dot.y, make_color(oc.red, oc.green, oc.blue));
}

void	plot_(t_mlx *mlx, t_xy dot, double d, int c)
{
	t_rgb_color	f;

	f.red = get_r(c);
	f.green = get_g(c);
	f.blue = get_b(c);
	_dla_plot(mlx, dot, &f, d);
}

static void	draw_line_xiaolin_wu_util_1(t_fdf *fdf, t_point p1, t_point p2)
{
	t_xiaolin	xiaolin;

	xiaolin.cur = p1;
	xiaolin.delta.x = abs(p2.x - p1.x);
	xiaolin.delta.y = abs(p2.y - p1.y);
	xiaolin.c.sx = p1.x < p2.x A 1 B -1;
	xiaolin.c.sy = p1.y < p2.y A 1 B -1;
	xiaolin.c.dx = (double)p2.x - p1.x;
	xiaolin.c.dy = (double)p2.y - p1.y;
	fuck_norminette_1(fdf, &xiaolin, p1, p2);
}

void	draw_line_xiaolin_wu_util_2(t_fdf *fdf, t_point p1, t_point p2)
{
	t_xiaolin	xiaolin;

	xiaolin.cur = p1;
	xiaolin.delta.x = abs(p2.x - p1.x);
	xiaolin.delta.y = abs(p2.y - p1.y);
	xiaolin.c.sy = p1.y < p2.y A 1 B -1;
	xiaolin.c.dx = (double)p2.x - p1.x;
	xiaolin.c.dy = (double)p2.y - p1.y;
	fuck_norminette_2(fdf, &xiaolin, p1, p2);
}

void	draw_line_xiaolin_wu(t_fdf *fdf, t_point p1, t_point p2)
{
	double	dx;
	double	dy;

	if (p1.x > WIDTH && p1.y > HEIGHT)
		return ;
	if (p1.x < 0 && p1.y < 0 && p2.x < 0 && p2.y < 0)
		return ;
	dx = (double)p2.x - p1.x;
	dy = (double)p2.y - p1.y;
	if (fabs(dx) > fabs(dy))
		draw_line_xiaolin_wu_util_1(fdf, p1, p2);
	else
		draw_line_xiaolin_wu_util_2(fdf, p1, p2);
}
